{"version":3,"file":"toast.js","sources":["../src/toast.js"],"sourcesContent":["import $ from 'jquery'\nimport Util from './util'\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.1.3): toast.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst Toast = (($) => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME               = 'toast'\n  const VERSION            = '4.1.3'\n  const DATA_KEY           = 'bs.toast'\n  const EVENT_KEY          = `.${DATA_KEY}`\n  const JQUERY_NO_CONFLICT = $.fn[NAME]\n\n  const Event = {\n    CLICK_DISMISS : `click.dismiss${EVENT_KEY}`,\n    HIDE          : `hide${EVENT_KEY}`,\n    HIDDEN        : `hidden${EVENT_KEY}`,\n    SHOW          : `show${EVENT_KEY}`,\n    SHOWN         : `shown${EVENT_KEY}`\n  }\n\n  const ClassName = {\n    FADE : 'fade',\n    HIDE : 'hide',\n    SHOW : 'show'\n  }\n\n  const DefaultType = {\n    animation : 'boolean',\n    autohide  : 'boolean',\n    delay     : 'number'\n  }\n\n  const Default = {\n    animation : true,\n    autohide  : true,\n    delay     : 500\n  }\n\n  const Selector = {\n    DATA_DISMISS : '[data-dismiss=\"toast\"]'\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Toast {\n    constructor(element, config) {\n      this._element = element\n      this._config  = this._getConfig(config)\n      this._timeout = null\n      this._setListeners()\n    }\n\n    // Getters\n\n    static get VERSION() {\n      return VERSION\n    }\n\n    static get DefaultType() {\n      return DefaultType\n    }\n\n    // Public\n\n    show() {\n      $(this._element).trigger(Event.SHOW)\n\n      if (this._config.animation) {\n        this._element.classList.add(ClassName.FADE)\n      }\n\n      const complete = () => {\n        $(this._element).trigger(Event.SHOWN)\n\n        if (this._config.autohide) {\n          this.hide()\n        }\n      }\n\n      this._element.classList.add(ClassName.SHOW)\n      if (this._config.animation) {\n        const transitionDuration = Util.getTransitionDurationFromElement(this._element)\n\n        $(this._element)\n          .one(Util.TRANSITION_END, complete)\n          .emulateTransitionEnd(transitionDuration)\n      } else {\n        complete()\n      }\n    }\n\n    hide(withoutTimeout) {\n      if (!this._element.classList.contains(ClassName.SHOW)) {\n        return\n      }\n\n      $(this._element).trigger(Event.HIDE)\n\n      if (withoutTimeout) {\n        this._close()\n      } else {\n        this._timeout = setTimeout(() => {\n          this._close()\n        }, this._config.delay)\n      }\n    }\n\n    dispose() {\n      clearTimeout(this._timeout)\n      this._timeout = null\n\n      if (this._element.classList.contains(ClassName.SHOW)) {\n        this._element.classList.remove(ClassName.SHOW)\n      }\n\n      $(this._element).off(Event.CLICK_DISMISS)\n\n      $.removeData(this._element, DATA_KEY)\n      this._element = null\n      this._config  = null\n    }\n\n    // Private\n\n    _getConfig(config) {\n      config = {\n        ...Default,\n        ...$(this._element).data(),\n        ...typeof config === 'object' && config ? config : {}\n      }\n\n      Util.typeCheckConfig(\n        NAME,\n        config,\n        this.constructor.DefaultType\n      )\n\n      return config\n    }\n\n    _setListeners() {\n      $(this._element).on(\n        Event.CLICK_DISMISS,\n        Selector.DATA_DISMISS,\n        () => this.hide(true)\n      )\n    }\n\n    _close() {\n      const complete = () => {\n        $(this._element).trigger(Event.HIDDEN)\n      }\n\n      this._element.classList.remove(ClassName.SHOW)\n\n      if (this._config.animation) {\n        const transitionDuration = Util.getTransitionDurationFromElement(this._element)\n\n        $(this._element)\n          .one(Util.TRANSITION_END, complete)\n          .emulateTransitionEnd(transitionDuration)\n      } else {\n        complete()\n      }\n    }\n\n    // Static\n\n    static _jQueryInterface(config) {\n      return this.each(function () {\n        const $element = $(this)\n        let data       = $element.data(DATA_KEY)\n        const _config  = typeof config === 'object' && config\n\n        if (!data) {\n          data = new Toast(this, _config)\n          $element.data(DATA_KEY, data)\n        }\n\n        if (typeof config === 'string') {\n          if (typeof data[config] === 'undefined') {\n            throw new TypeError(`No method named \"${config}\"`)\n          }\n\n          data[config](this)\n        }\n      })\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME]             = Toast._jQueryInterface\n  $.fn[NAME].Constructor = Toast\n  $.fn[NAME].noConflict  = () => {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return Toast._jQueryInterface\n  }\n\n  return Toast\n})($)\n\nexport default Toast\n"],"names":["Toast","$","NAME","VERSION","DATA_KEY","EVENT_KEY","JQUERY_NO_CONFLICT","fn","Event","CLICK_DISMISS","HIDE","HIDDEN","SHOW","SHOWN","ClassName","FADE","DefaultType","animation","autohide","delay","Default","Selector","DATA_DISMISS","element","config","_element","_config","_getConfig","_timeout","_setListeners","show","trigger","classList","add","complete","hide","transitionDuration","Util","getTransitionDurationFromElement","one","TRANSITION_END","emulateTransitionEnd","withoutTimeout","contains","_close","setTimeout","dispose","clearTimeout","remove","off","removeData","data","typeCheckConfig","constructor","on","_jQueryInterface","each","$element","TypeError","Constructor","noConflict"],"mappings":"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"}